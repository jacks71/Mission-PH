(this["webpackJsonp@coreui/coreui-free-react-admin-template"]=this["webpackJsonp@coreui/coreui-free-react-admin-template"]||[]).push([[19],{2087:function(e,t,n){"use strict";var a=n(1),r=n(27),o=n(37),i=function(e){return{type:"SET_THEATER_MODE",payload:e}};t.a=function(){var e=Object(r.d)((function(e){return e.theaterMode})),t=Object(r.d)((function(e){return e.load})),n=Object(r.c)(),c=Object(o.useLocation)();Object(a.useEffect)((function(){n(i(localStorage.getItem("theaterMode")))}),[n]);var l=Object(a.useCallback)((function(e){n(e?i(e):{type:"TOGGLE_THEATER_MODE"})}),[n]);return Object(a.useEffect)((function(){var n;"on"===e&&(null===(n=c.pathname)||void 0===n?void 0:n.includes("/video/"))&&t?(window&&window.scrollTo(0,0),window.setTimeout((function(){window&&window.scrollTo(0,150)}),1),window.setTimeout((function(){window&&window.scrollTo(0,152)}),500)):window&&window.scrollTo(0,0)}),[e,t]),Object(a.useEffect)((function(){e&&localStorage.setItem("theaterMode",e)}),[e,n]),{theaterMode:e,toggleTheaterMode:l}}},2396:function(e,t,n){e.exports=n.p+"static/media/error-customize.17fef4a8.png"},2481:function(e,t,n){"use strict";var a=n(79),r=n(20),o=n.n(r),i=n(58),c=n(55),l=n(2057),s=n(2058),u=n(36),d=n(24),f=n(10),m=n(1889),p=n(1),b=n.n(p),v=n(27),h=n(2534),g=(n(2535),n(2395)),y=n.n(g),w=n(63),E=n.n(w),O=n(2536),x=n.n(O),k=n(2537),j=n.n(k),T=n(2494),S=n.n(T),C=n(2087),_=function(){var e=Object(u.a)(o.a.mark((function e(){var t,n,a,r,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=[{initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/mp4;codecs="mp4a.40.2"'}],videoCapabilities:[{contentType:'video/mp4;codecs="avc1.42E01E"'}]}],n={Widevine:{name:"Widevine",mediaKey:"com.widevine.alpha"},PlayReady:{name:"PlayReady",mediaKey:"com.microsoft.playready"},FairPlay:{name:"FairPlay",mediaKey:"com.apple.fps"}},a="",r=o.a.mark((function e(r){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,navigator.requestMediaKeySystemAccess(n[r].mediaKey,t).then((function(e){a=n[r].name,console.log(a+" support ok")})).catch((function(e){console.log(e)}));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),e,null,[[0,5]])})),e.t0=o.a.keys(n);case 5:if((e.t1=e.t0()).done){e.next=10;break}return i=e.t1.value,e.delegateYield(r(i),"t2",8);case 8:e.next=5;break;case 10:return e.abrupt("return",a);case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var e,t=navigator.userAgent.toLowerCase(),n=navigator.appName;return"Microsoft Internet Explorer"===n||t.indexOf("trident")>-1||t.indexOf("edge/")>-1?(e="ie","Microsoft Internet Explorer"===n?t=/msie ([0-9]{1,}[\.0-9]{0,})/.exec(t):t.indexOf("edge/")>-1&&(e="Edge")):t.indexOf("safari")>-1?e=t.indexOf("opr")>-1?"Opera":t.indexOf("whale")>-1?"Whale":t.indexOf("edg/")>-1||t.indexOf("Edge/")>-1?"Edge":t.indexOf("chrome")>-1?"Chrome":"Safari":t.indexOf("firefox")>-1&&(e="firefox"),e},R=n(540),I=n(2495),P=function(e){return b.a.createElement(R.a,{openModal:e.openModal,noCloseIcon:!0,noButton:!0,editMode:!0,customStyle:{backgroundColor:"#212121",border:"none",maxWidth:"885px"}},b.a.createElement(I.a,null))},F={edit:!1};t.a=function(e){var t=e.dashUri,n=e.hlsUri,r=e.token,g=e.courseId,w=e.unitId,O=e.isConceptual,k=void 0!==O&&O,T=e.showPrevious,R=e.showNext,I=e.handlePreviousUnit,L=e.handleNextUnit,N=Object(p.useRef)(null),A=Object(p.useRef)(null),B=Object(p.useState)(),q=Object(f.a)(B,2),D=q[0],U=q[1],W=Object(v.d)((function(e){var t;return(null===(t=e.user)||void 0===t?void 0:t.data)||{}})),V=Object(p.useState)((function(){return parseFloat(localStorage.getItem("playerVolume")||.5)})),z=Object(f.a)(V,2),G=z[0],K=z[1],Y=Object(p.useState)([]),H=Object(f.a)(Y,2),X=H[0],J=H[1],Q=Object(p.useState)(0),Z=Object(f.a)(Q,2),$=Z[0],ee=Z[1],te=Object(p.useRef)(null),ne=null===X||void 0===X?void 0:X.reduce((function(e,t){return e+t}),0),ae=Object(p.useState)([0]),re=Object(f.a)(ae,2),oe=re[0],ie=re[1],ce=Object(p.useRef)(null),le=Object(p.useRef)(),se=Object(p.useRef)(),ue=Object(p.useState)(!1),de=Object(f.a)(ue,2),fe=de[0],me=de[1],pe=Object(p.useState)(!0),be=Object(f.a)(pe,2),ve=be[0],he=be[1],ge=Object(p.useState)(!0),ye=Object(f.a)(ge,2),we=ye[0],Ee=ye[1],Oe=Object(v.d)((function(e){var t;return null===(t=e.catchupChallenge)||void 0===t?void 0:t.challengeReward})),xe=Object(C.a)(),ke=xe.theaterMode,je=xe.toggleTheaterMode,Te=Object(p.useState)(null),Se=Object(f.a)(Te,2),Ce=Se[0],_e=Se[1],Me=Object(m.a)("(min-width:768px)"),Re=Object(p.useCallback)((function(){var e=parseFloat(localStorage.getItem("playbackSpeed"))||1;A.current.playbackRate&&(A.current.playbackRate=e)}),[]),Ie=Object(p.useCallback)((function(){te.current=window.setInterval((function(){J((function(e){return[].concat(Object(d.a)(e),[1])}))}),1e3),Re()}),[Re]),Pe=Object(p.useCallback)((function(){te.current&&clearInterval(te.current),Re()}),[Re]),Fe=Object(p.useCallback)((function(){var e=document.querySelector(".shaka-video-container");if(e){var t=document.createElement("div");t.setAttribute("id","plyr-logo"),ce.current=t;var n=e.getBoundingClientRect(),a=n.width,r=n.height,o=t.getBoundingClientRect(),i=o.width,c=o.height;t.style.display="block",t.style.top="".concat(Math.random()*(r-c),"px"),t.style.left="".concat(Math.random()*(a-i),"px"),t.innerText="".concat(null===W||void 0===W?void 0:W.email),t.style.fontFamily="Inter, sans-serif",t.style.fontWeight="400",t.style.color="red",t.style.position="absolute",t.style.fontSize="12px",t.style.userSelect="none",e.appendChild(t),le.current=new MutationObserver((function(t){t.forEach((function(t){e.contains(t.target)&&(E()({icon:"error",title:"Couldn't find video parser. Try closing and opening the app again.!",text:"I will reload in 5 seconds",timer:5e3,className:"swal-title-for-shaka-player"}).then((function(){window.location.reload()})),se.current&&clearInterval(se.current),le.current.disconnect())}))})),le.current.observe(e,{childList:!0}),se.current=setInterval((function(){var n=e.getBoundingClientRect(),a=n.width,r=n.height,o=t.getBoundingClientRect(),i=o.width,c=o.height;t.style.display="block",t.style.top="".concat(Math.random()*(r-c),"px"),t.style.left="".concat(Math.random()*(a-i),"px"),t.innerText="".concat(W.email),t.style.fontFamily="Inter, sans-serif",t.style.fontWeight="400",t.style.color="red",t.style.position="absolute",t.style.fontSize="12px",t.style.userSelect="none"}),5e3)}else E()({icon:"error",title:"Player error. Player not initialized",text:"I will reload in 5 seconds",timer:5e3,className:"swal-title-for-shaka-player"}).then((function(){window.location.reload()}))}),[W.email]),Le=function(e){e.forEach((function(e){e.isIntersecting?me(!0):me(!1)}))},Ne=Object(p.useCallback)((function(e){I(e)}),[I]),Ae=Object(p.useCallback)((function(e){L(e)}),[L]),Be=Object(p.useCallback)(function(){var e=Object(u.a)(o.a.mark((function e(a){var u,d,f,m,p,b,v;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(d={},f=new y.a.Player(A.current),m=new y.a.ui.Overlay(f,N.current,A.current),_e(m),p={seekBarColors:{base:"rgba(255, 255, 255, 0.3)",buffered:"#ffffff",played:"#0294f9"},controlPanelElements:["play_pause","mute","volume","time_and_duration","spacer","rewind_10","forward_10","theater_mode","fullscreen","overflow_menu"],addBigPlayButton:!1,overflowMenuButtons:["playback_rate","quality"],enableTooltips:!0,playbackRates:[.5,.75,.85,1,1.25,1.5,1.75,1.85,2]},y.a.ui.Controls.registerElement("rewind_10",new h.b.Factory),y.a.ui.Controls.registerElement("forward_10",new h.a.Factory),f.TheaterMode=function(e){Object(l.a)(n,e);var t=Object(s.a)(n);function n(e,a){var r;Object(c.a)(this,n),(r=t.call(this,e,a)).theaterModeValue=ke,r.button_=document.createElement("button");var o=document.createElement("img");return o.src=S.a,o.alt="Theater Mode",r.button_.appendChild(o),r.button_.classList.add("shaka-tooltip"),r.button_.ariaLabel="theater mode",r.parent.appendChild(r.button_),r.eventManager.listen(r.button_,"click",(function(){r.theaterModeValue="on"===r.theaterModeValue?"off":"on",je(r.theaterModeValue)})),r}return n}(y.a.ui.Element),f.Previous=function(e){Object(l.a)(n,e);var t=Object(s.a)(n);function n(e,a){var r;Object(c.a)(this,n),(r=t.call(this,e,a)).button_=document.createElement("button");var o=document.createElement("img");return o.src=x.a,o.alt="Previous",o.style="width:14px",r.button_.style="margin-left:12px",r.button_.classList.add("shaka-tooltip"),r.button_.ariaLabel="previous",r.button_.appendChild(o),r.parent.appendChild(r.button_),r.eventManager.listen(r.button_,"click",(function(e){Ne(e)})),r}return n}(y.a.ui.Element),f.NextStep=function(e){Object(l.a)(n,e);var t=Object(s.a)(n);function n(e,a){var r;Object(c.a)(this,n),(r=t.call(this,e,a)).button_=document.createElement("button");var o=document.createElement("img");return o.src=j.a,o.alt="Previous",o.style="width:14px",r.button_.classList.add("shaka-tooltip"),r.button_.ariaLabel="next",r.button_.appendChild(o),r.parent.appendChild(r.button_),r.eventManager.listen(r.button_,"click",(function(e){Ae(e)})),r}return n}(y.a.ui.Element),f.TheaterMode.Factory=function(){function e(){Object(c.a)(this,e)}return Object(i.a)(e,[{key:"create",value:function(e,t){return new f.TheaterMode(e,t)}}]),e}(),f.Previous.Factory=function(){function e(){Object(c.a)(this,e)}return Object(i.a)(e,[{key:"create",value:function(e,t){return new f.Previous(e,t)}}]),e}(),f.NextStep.Factory=function(){function e(){Object(c.a)(this,e)}return Object(i.a)(e,[{key:"create",value:function(e,t){return new f.NextStep(e,t)}}]),e}(),y.a.ui.Controls.registerElement("theater_mode",new f.TheaterMode.Factory),y.a.ui.Controls.registerElement("previous",new f.Previous.Factory),y.a.ui.Controls.registerElement("next",new f.NextStep.Factory),(b=document.querySelector(".shaka-forward-ten-button"))&&b.classList.add("shaka-tooltip"),m.configure(p),"Widevine"!==a){e.next=26;break}u=t,d={abr:{enabled:!0,defaultBandwidthEstimate:442e3,bandwidthUpgradeTarget:.7,bandwidthDowngradeTarget:.95},drm:{servers:{"com.widevine.alpha":"https://drm-widevine-licensing.axprod.net/AcquireLicense"},advanced:{"com.widevine.alpha":{videoRobustness:"SW_SECURE_CRYPTO",audioRobustness:"SW_SECURE_CRYPTO"}}},streaming:{bufferingGoal:120}},f.getNetworkingEngine().registerRequestFilter((function(e,t){e===y.a.net.NetworkingEngine.RequestType.LICENSE&&(t.headers["X-AxDRM-Message"]=r)})),e.next=39;break;case 26:if("PlayReady"!==a){e.next=32;break}u=t,d={abr:{enabled:!0,defaultBandwidthEstimate:442e3,bandwidthUpgradeTarget:.7,bandwidthDowngradeTarget:.95},drm:{servers:{"com.widevine.alpha":"https://drm-widevine-licensing.axprod.net/AcquireLicense","com.microsoft.playready":"https://drm-playready-licensing.axprod.net/AcquireLicense"},advanced:{"com.widevine.alpha":{videoRobustness:"SW_SECURE_CRYPTO",audioRobustness:"SW_SECURE_CRYPTO"}}}},f.getNetworkingEngine().registerRequestFilter((function(e,t){e===y.a.net.NetworkingEngine.RequestType.LICENSE&&(t.headers["X-AxDRM-Message"]=r)})),e.next=39;break;case 32:if("FairPlay"!==a){e.next=39;break}return u=n,e.next=36,De();case 36:v=e.sent,d={abr:{enabled:!0,defaultBandwidthEstimate:442e3,bandwidthUpgradeTarget:.7,bandwidthDowngradeTarget:.95},manifest:{retryParameters:{timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4,maxAttempts:3,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5}},drm:{servers:{"com.apple.fps":"https://drm-fairplay-licensing.axprod.net/AcquireLicense"},advanced:{"com.apple.fps":{serverCertificate:new Uint8Array(v)}},retryParameters:{timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4,maxAttempts:3,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5}},streaming:{bufferingGoal:120,retryParameters:{timeout:3e4,stallTimeout:5e3,connectionTimeout:1e4,maxAttempts:2,baseDelay:1e3,backoffFactor:2,fuzzFactor:.5}}},f.getNetworkingEngine().registerRequestFilter((function(e,t){e===y.a.net.NetworkingEngine.RequestType.LICENSE&&(t.headers["X-AxDRM-Message"]=r)}));case 39:f.setTextTrackVisibility(!0),f.load(u).then((function(){console.log("The video has now been loaded!")})).catch((function(e){var t;t=e,console.error("Error code",t.code,"object",t),console.log(u)})),f.configure(d),U(f);case 43:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[t,Ae,Ne,n,ke,je,r]),qe=Object(p.useCallback)((function(){y.a.polyfill.installAll(),y.a.Player.isBrowserSupported()?_().then(function(){var e=Object(u.a)(o.a.mark((function e(t){var n,a;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=M(),a="Running in "+n+". "+t+" supported.",console.log(a),e.next=5,Be(t);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()):(console.error("Browser not supported!"),alert("Browser not supported!"))}),[Be]);var De=function(){var e=Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://vtb.axinom.com/FPScert/fairplay.cer");case 2:return t=e.sent,e.next=5,t.arrayBuffer();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.useEffect)((function(){if(Ce){var e=[T&&"previous","play_pause",R&&"next","mute","volume","time_and_duration",Me&&"spacer","rewind_10","forward_10",Me&&"theater_mode","fullscreen","overflow_menu"];Ce.configure({controlPanelElements:e})}}),[Me,R,T,Ce]),Object(p.useEffect)((function(){var e=A.current;if(D){var t;if(e.addEventListener("timeupdate",(function(){var t=parseInt(null===e||void 0===e?void 0:e.duration);ee(t);var n=parseInt(null===e||void 0===e?void 0:e.currentTime);ie((function(e){return[].concat(Object(d.a)(e),[n])}))})),e.addEventListener("play",Ie),e.addEventListener("pause",Pe),e.addEventListener("loadeddata",Fe),e.addEventListener("ratechange",Re),N.current){var n=N.current.querySelector(".shaka-volume-bar"),a=N.current.querySelector(".shaka-volume-bar-container");if(n&&a){var r=G;r>1?(r=1,localStorage.setItem("playerVolume",r),K(r)):r<0&&(r=0,localStorage.setItem("playerVolume",r),K(r)),e.volume=r,n.value=r;var o=100*r;a.style.background="linear-gradient(to right, rgb(255, 255, 255) ".concat(o,"%, rgba(255, 255, 255, 0.54) ").concat(o,"%, rgba(255, 255, 255, 0.54) 100%)")}}if(we){var i=parseFloat(localStorage.getItem("storePlayedPosition"));i&&i>0&&e.addEventListener("loadedmetadata",(function(){e.currentTime=i,localStorage.setItem("storePlayedPosition",0)}))}var c=null===(t=document.getElementsByClassName("shaka-playback-rates")[0])||void 0===t?void 0:t.childNodes;c&&c.forEach((function(e,t){e.addEventListener("click",(function(e){if(0!==t){var n=parseFloat(e.target.textContent);a=n,localStorage.setItem("playbackSpeed",a)}var a}))}))}return function(){e.removeEventListener("play",Ie),e.removeEventListener("pause",Pe),e.removeEventListener("loadeddata",Fe),e.removeEventListener("ratechange",Re),D&&(le.current&&le.current.disconnect(),D.unload().then((function(){})).catch((function(e){console.error("Error unloading player:",e)})))}}),[D,Fe,Ie,Pe,Re]),Object(p.useEffect)((function(){var e=N.current,t=A.current,n=function(n){var a="INPUT"===document.activeElement.nodeName,r="TEXTAREA"===document.activeElement.nodeName,o=document.activeElement.className;if(!a&&!r&&ve&&fe&&!(null===o||void 0===o?void 0:o.includes("ql-editor")))switch(n.key){case" ":n.preventDefault(),t.paused?t.play():t.pause();break;case"f":document.fullscreenElement?document.exitFullscreen():e.requestFullscreen();break;case"t":je();break;case"ArrowUp":K((function(e){var n;return n=e>=1?1:parseFloat((e+.1).toFixed(1)),t.volume=n,localStorage.setItem("playerVolume",n),n})),n.preventDefault();break;case"ArrowDown":K((function(e){var n;return n=e<=0?0:parseFloat((e-.1).toFixed(1)),t.volume=n,localStorage.setItem("playerVolume",n),n})),n.preventDefault();break;case"ArrowLeft":t.currentTime-=5;break;case"ArrowRight":t.currentTime+=5}};return document.addEventListener("keydown",n),function(){document.removeEventListener("keydown",n)}}),[fe,ve,je]),Object(p.useEffect)((function(){var e,t=null===(e=document.getElementsByClassName("rbt-input-main"))||void 0===e?void 0:e[0];if(t){var n=new MutationObserver((function(e){var t,n=Object(a.a)(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;if("attributes"===r.type&&"class"===r.attributeName){var o=r.target===document.activeElement;he(!o);break}}}catch(i){n.e(i)}finally{n.f()}}));return n.observe(t,{attributes:!0}),function(){n.disconnect()}}}),[fe]),Object(p.useEffect)((function(){var e=setInterval((function(){if(!k){var e=Math.max.apply(Math,Object(d.a)(oe));localStorage.setItem("lastWatchTime",JSON.stringify({unitId:w,totalPlayed:ne,totalCovered:e,originalDuration:$,courseId:g}))}}),1e3);return function(){clearInterval(e)}}),[ne,$]),Object(p.useEffect)((function(){function e(){if(navigator.onLine)Ee(!0);else{var e=Math.max.apply(Math,Object(d.a)(oe));localStorage.setItem("storePlayedPosition",String(e)),Ee(!1)}}return window.addEventListener("online",e),window.addEventListener("offline",e),function(){document.removeEventListener("online",e),document.removeEventListener("offline",e)}}),[oe]),Object(p.useEffect)((function(){qe();var e=new IntersectionObserver(Le,{root:null,rootMargin:"0px",threshold:0});return N.current&&e.observe(N.current),function(){e.disconnect()}}),[]),b.a.createElement(b.a.Fragment,null,b.a.createElement(P,{openModal:F}),b.a.createElement("div",{className:"shaka-player-component",ref:N,style:{width:"100%",maxWidth:"100%"}},b.a.createElement("video",{disablePictureInPicture:!0,disableRemotePlayback:!0,controls:!1,playsInline:!0,autoPlay:!(null===Oe||void 0===Oe?void 0:Oe.edit),ref:A,onVolumeChange:function(e){var t=e.target.volume.toFixed(1);localStorage.setItem("playerVolume",t),K(parseFloat(t))},style:{maxWidth:"100%",width:"100%"}})))}},2494:function(e,t,n){e.exports=n.p+"static/media/theater-mode.c6c07530.svg"},2495:function(e,t,n){"use strict";var a=n(1),r=n.n(a),o=n(37),i=n(2396),c=n.n(i);t.a=function(){var e=Object(o.useHistory)();return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"shaka-player-aleart-component text-center"},r.a.createElement("div",{style:{borderBottom:"1px dashed rgba(255, 255, 255, 0.2)"},className:"mb-3"},r.a.createElement("img",{src:c.a,alt:"error",className:"img-fluid"}),r.a.createElement("div",{className:"header mt-2"},r.a.createElement("h3",null,"Oooops !"),r.a.createElement("p",null,"Browser Not Supported"))),r.a.createElement("div",{className:"body"},r.a.createElement("p",{className:"px-3"},"This browser does not support video technology. Use ","",r.a.createElement("span",{className:"text-highlight",onClick:function(){window.open("https://www.google.com/chrome/","_blank","noopener noreferrer")}},"Google's Chrome")," ","browser to access lessons non-stop."),r.a.createElement("button",{onClick:function(){return e.push("/dashboard")},className:"btn btn-primary text-white mt-2"},"Return To Home"))))}},2536:function(e,t,n){e.exports=n.p+"static/media/backward-step.bba308f8.svg"},2537:function(e,t,n){e.exports=n.p+"static/media/forward-step.55039a30.svg"},2538:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var a="https://marsmedia.programming-hero.com"}}]);